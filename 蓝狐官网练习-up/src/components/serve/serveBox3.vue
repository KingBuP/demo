<template>
  <div class="servebox3 min-w-[1200px]">
    <div class="con3 min-w-[1200px]">
      <div class="w-full">
        <p class="text-[24.9px] font-bold leading-[100px] pl-[35px] box-border">
          行业导师为您的就业提供专业指导
        </p>
        <ul class="flex justify-evenly w-full mt-[20px]">
          <li
            class="w-[349.43px] h-[352.75px] overflow-hidden"
            style="box-shadow: 0px 3px 6px rgb(0 0 0 / 16%)"
          >
            <div class="w-full overflow-hidden">
              <img
                src="/images/serve/z1.png"
                class="hover:scale-[1.05]"
                style="transition: all 0.4s linear"
              />
            </div>
            <p class="font-bold text-[16.6px] mt-[20px] text-center">
              招聘平台
            </p>
            <p class="mt-[20px] font-light text-center text-[15.77px]">
              整合企业招聘资源两万余家服务企业对
            </p>
            <p class="text-center text-[15.77px] font-light">
              蓝狐学员打开职场通道
            </p>
          </li>
          <li
            class="w-[349.43px] h-[352.75px] overflow-hidden"
            style="box-shadow: 0px 3px 6px rgb(0 0 0 / 16%)"
          >
            <div class="w-full overflow-hidden">
              <img
                src="/images/serve/z2.png"
                class="hover:scale-[1.05]"
                style="transition: all 0.4s linear"
              />
            </div>
            <p class="font-bold text-[16.6px] mt-[20px] text-center">
              招聘平台
            </p>
            <p class="mt-[20px] font-light text-center text-[15.77px]">
              整合企业招聘资源两万余家服务企业对
            </p>
            <p class="text-center text-[15.77px] font-light">
              蓝狐学员打开职场通道
            </p>
          </li>
          <li
            class="w-[349.43px] h-[352.75px] overflow-hidden"
            style="box-shadow: 0px 3px 6px rgb(0 0 0 / 16%)"
          >
            <div class="w-full overflow-hidden">
              <img
                src="/images/serve/z3.png"
                class="hover:scale-[1.05]"
                style="transition: all 0.4s linear"
              />
            </div>
            <p class="font-bold text-[16.6px] mt-[20px] text-center">
              招聘平台
            </p>
            <p class="mt-[20px] font-light text-center text-[15.77px]">
              整合企业招聘资源两万余家服务企业对
            </p>
            <p class="text-center text-[15.77px] font-light">
              蓝狐学员打开职场通道
            </p>
          </li>
        </ul>
      </div>
      <div class="w-[1129px] bg-white mx-auto mt-[40px]">
        <div class="box w-full mx-auto">
          <p class="text-[24.9px] font-bold px-[5px] leading-[50px]">
            专场招聘会
          </p>
          <div class="w-[1129px] h-[1px] bg-[#cbcbcb] mt-[15px]"></div>
          <div class="w-[1129px] flex justify-between">
            <div class="w-[349.43px] h-[408.36px] mt-[20px] ml-[40px]">
              <div class="overflow-hidden">
                <img src="/images/serve/le.png" class="object-cover" />
              </div>
            </div>
            <div class="you relative w-[715px] mt-[20px] overflow-hidden">
              <div class="w-[715px] h-[311px] flex justify-between">
                <div class="w-[260px]">
                  <div class="">
                    <img src="/images/serve/kk1.png" class="w-full" />
                  </div>
                </div>
                <div class="right w-[450px]">
                  <ul
                    class="flex flex-wrap h-[317px] overflow-hidden"
                    style="align-content: space-between"
                  >
                    <li class="w-1/2 h-1/1 flex justify-center items-center">
                      <img src="/images/serve/k1.png" class="w-[98%]" />
                    </li>
                    <li class="w-1/2 h-1/1 flex justify-center items-center">
                      <img src="/images/serve/k2.png" class="w-[98%]" />
                    </li>
                    <li class="w-1/2 h-1/1 flex justify-center items-center">
                      <img src="/images/serve/k3.png" class="w-[98%]" />
                    </li>
                    <li class="w-1/2 h-1/1 flex justify-center items-center">
                      <img src="/images/serve/k4.png" class="w-[98%]" />
                    </li>
                  </ul>
                </div>
              </div>

              <ul class="cons absolute h-[30px] flex">
                <li class="li w-[715px] flex justify-between my-[2px] mx-[3px]">
                  <div class="bt mt-[30px] w-[715px]">
                    <ul class="flex justify-between">
                      <li class="">
                        <img
                          src="/images/serve/jo1.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                      <li class="">
                        <img
                          src="/images/serve/jo2.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                      <li class="">
                        <img
                          src="/images/serve/jo3.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                      <li class="">
                        <img
                          src="/images/serve/jo4.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="li w-[715px] flex justify-between my-[2px] mx-[3px]">
                  <div class="bt mt-[30px] w-[715px]">
                    <ul class="flex justify-between">
                      <li class="">
                        <img
                          src="/images/serve/jo1.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                      <li class="">
                        <img
                          src="/images/serve/jo2.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                      <li class="">
                        <img
                          src="/images/serve/jo3.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                      <li class="">
                        <img
                          src="/images/serve/jo4.png"
                          class="w-[160.19px] h45.65px"
                        />
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>

              <div
                class="jian w-[120px] mx-auto mt-[86px] flex justify-between"
              >
                <a href="javascript:;" class="arrow-l">
                  <img
                    src="/images/serve/an1.png"
                    class="w-[28.22px] h-[28.22px]"
                  />
                </a>
                <a href="javascript:;" class="arrow-r">
                  <img
                    src="/images/serve/an2.png"
                    class="w-[28.22px] h-[28.22px]"
                  />
                </a>
              </div>
            </div>
          </div>
        </div>
        <!--  -->
        <div class="w-[1129px] overflow-hidden bg-white mt-[40px] mx-auto">
          <p class="text-[41.5px] font-bold text-center">就业数据</p>
          <Box3itemVue class="mt-[40px]" />
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { onMounted } from "vue-demi";
import Box3itemVue from "./box3item.vue";

onMounted(() => {
  // 左右箭头切换效果
  var outer = document.querySelector(".servebox3 .box .you") as HTMLDivElement;
  var outerWidth = outer.offsetWidth;
  //   console.log(outerWidth);
  var slider = document.querySelector(
    ".servebox3 .box .you .cons"
  ) as HTMLDivElement;
  var lis = document.querySelectorAll(".servebox3 .box .you .cons .li");
  //   console.log(lis);
  var arrow_l = document.querySelector(".servebox3 .box .you .arrow-l");
  var arrow_r = document.querySelector(".servebox3 .box .you .arrow-r");

  //给左右箭头绑定事件
  var index = 0;
  arrow_r?.addEventListener("click", function () {
    if (index == lis.length) {
      slider.style.left = "0";
      index = 0;
    }
    index++;
    animate(slider, -index * outerWidth);
  });
  // 复制第一个li放ul的后面
  var first = lis[0].cloneNode(true);
  slider.appendChild(first);
  // 左箭头
  arrow_l?.addEventListener("click", function () {
    if (index == 0) {
      index = lis.length;
      slider.style.left = -index * outerWidth + "px";
    }
    index--;
    animate(slider, -index * outerWidth);
  });
  function animate(obj: any, target: any, callback?: any) {
    clearInterval(obj.timer);
    // timer = null;
    //给当前对象设置一个间歇定时器，这样的目的是给当前对象添加了一个属性，
    // 不会在内存中开辟新空间
    obj.timer = setInterval(function () {
      //步长值写到定时器里面，因为每次执行都要判断当前对象所在的位置
      //把我们的步长值改为整数，不要出现小数的问题
      var step = (target - obj.offsetLeft) / 10; //缓动动画公式
      step = step > 0 ? Math.ceil(step) : Math.floor(step);
      if (obj.offsetLeft == target) {
        //停止定时器
        clearInterval(obj.timer);
        if (callback) {
          //回调函数写在定时器结束里面
          callback();
        }
      } else {
        //步长值为一个慢慢变小的值   公式: (目标位置 - 现在位置) / 10
        obj.style.left = obj.offsetLeft + step + "px";
      }
    }, 15);
  }
});
</script>

<style lang="scss">
.servebox3 {
  @apply w-full bg-[#f7f7f7];
  .con3 {
    @apply mx-auto w-[1200px] pb-[60px] box-border;
  }
}
</style>
